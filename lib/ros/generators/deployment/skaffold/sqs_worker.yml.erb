  - name: sqs_worker
    deploy:
      helm:
        releases:
        - name: <%= name %>-sqs-worker
          chartPath: <%= chart_path %>
          skipBuildDependencies: true
          values:
            image: <%= name %>
          imageStrategy:
            helm: {}
          wait: false
          overrides:
            nameOverride: <%= name %>
            image:
              pullPolicy: <%= pull_policy %>
            imagePullSecrets:
              - name: <%= pull_secret %>
            app:
              command: ["bundle", "exec", "shoryuken", "-C", "config/shoryuken.yml", "-r", "./app/workers"]
              envFromSecrets:<% secrets_files.each do |name| %>
                - <%= name %><% end %>
            bootstrap:
              enabled: false
            resources:
              limits:
                cpu: 1
                memory: 2Gi
              requests:
                cpu: 0.5
                memory: 1.5Gi
            service:
              enabled: false
